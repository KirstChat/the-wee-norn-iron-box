{% extends "base.html" %}
{% load static %}

{% block page_heading %}
    <!-- Image & CTA Button -->
    <section class="home-heading bg-img d-flex align-items-end">
        <div class="container text-center">
            {% if request.user.is_authenticated %}
                <a class="btn mb-4 py-2 px-4" href="{% url 'products' %}">Products</a>
            {% else %}
                <a class="btn mb-4 py-2 px-4" href="{% url 'account_signup' %}">Get Started</a>
            {% endif %}
        </div>
    </section>
{% endblock %}

{% block content %}
    <!-- How It Works-->
    <section class="steps-container">
        <div class="container p-4 text-center">
            <h2>How it Works</h2>
            <p class="mt-4">
                For Â£10 a month, we'll deliver your favourite Northern Irish goods to you! Simply follow theses
                steps:
            </p>

            <!-- Steps -->
            <div class="row g-4 steps">
                <!-- Account -->
                <div class="col-md-12 col-lg-4">
                    <div class="card border-0 h-100 p-4">
                        <i class="fas fa-box pb-4"></i>
                        <p class="fw-bold">
                            Sign up for an account to start adding your favourite items to your box
                        </p>
                        <p>
                            This includes
                            2 x Baked Goods, 2 x Drinks and 2 x Snacks
                        </p>
                    </div>
                </div>
                <!-- Subscription -->
                <div class="col-md-12 col-lg-4">
                    <div class="card border-0 h-100 p-4">
                        <i class="fas fa-credit-card pb-3"></i>
                        <p class="fw-bold">
                            Activate your subscription and add your delivery details
                        </p>
                        <p>
                            You can cancel your subscription and update your box at any time
                        </p>
                    </div>
                </div>
                <!-- Delivery -->
                <div class="col-md-12 col-lg-4">
                    <div class="card border-0 h-100 p-4">
                        <i class="fas fa-truck pb-3"></i>
                        <p class="fw-bold">
                            We'll quickly deliver your box to you every month at no extra cost
                        </p>
                        <p>
                            All baked goods are delivered fresh so no need to worry about expiry dates!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Subscribe Button -->
            {% if request.user.is_superuser %}
                <a class="btn mt-4 py-2 px-4" href="#">Product Admin</a>
            {% elif request.user.is_authenticated %}
                <a class="btn mt-4 py-2 px-4" href="{% url 'view_box' %}}">My Box</a>
            {% else %}
                <a href="{% url 'account_signup' %}" class="btn mt-4 py-2 px-4">Subscribe</a>
            {% endif %}
        </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials-container">
        <div class="container p-4 text-center">
            <h3>Here's what our subscribers think</h2>
            <!-- Review Carousel -->
            {% for review in reviews %}
                <div class="row">
                    <div class="col-md-4">
                        <p>{{ review.user }}</p>
                        <p>{{ review.review }}</p>
                        <p>{{ review.date_added|date:"y-m-d" }}</p>
                        <p>{{ review.rating }}</p>
                    </div>
                </div>
            {% endfor %}

            <!-- Add Review/Manage Reviews -->
            {% if request.user.is_superuser %}
                <a class="btn mt-4 py-2 px-4">Manage Reviews</a>
            {% elif request.user.is_authenticated %}
                <a href="" class="btn mt-4 py-2 px-4">Leave Review</a>
            {% endif %}
        </div>
    </section>
{% endblock %}